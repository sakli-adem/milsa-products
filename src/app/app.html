<div class="admin-container">
  
  <h1>âœ¨ Milsa Admin Panel</h1>

  <div class="card">
    <h2>âž• Ajouter un Nouveau Parfum</h2>
    
    <form (ngSubmit)="productForm.valid && onSubmit()" #productForm="ngForm" class="product-form">
      
      <div class="form-grid">
        <div class="form-group">
          <label>Code Parfum (Ref) <span class="req">*</span></label>
          <input type="text" [(ngModel)]="newProduct.code_parfum" name="code" required placeholder="Ex: 001" #code="ngModel">
          <small *ngIf="code.invalid && code.touched" style="color: red;">Le code est obligatoire.</small>
        </div>
        
        <div class="form-group">
          <label>Nom du Parfum <span class="req">*</span></label>
          <input type="text" [(ngModel)]="newProduct.nom_parfum" name="nom" required placeholder="Ex: Oud Royal">
        </div>

        <div class="form-group">
          <label>CatÃ©gorie <span class="req">*</span></label>
          <select [(ngModel)]="newProduct.categorie" name="cat" required>
            <option value="Homme">Homme</option>
            <option value="Femme">Femme</option>
            <option value="Luxe">Luxe</option>
          </select>
        </div>

        <div class="form-group">
          <label>Image URL <span class="req">*</span></label>
          <input type="text" [(ngModel)]="newProduct.image_url" name="img" required placeholder="https://...">
        </div>
      </div>

      <div class="prices-section">
        <div class="price-group">
          <input type="checkbox" [(ngModel)]="newProduct.dispo_15ml" name="d15" id="d15">
          <label for="d15">15 ML</label>
          <input type="number" [(ngModel)]="newProduct.prix_15ml" name="p15" placeholder="Prix" [required]="newProduct.dispo_15ml"> DT
        </div>

        <div class="price-group">
          <input type="checkbox" [(ngModel)]="newProduct.dispo_30ml" name="d30" id="d30">
          <label for="d30">30 ML</label>
          <input type="number" [(ngModel)]="newProduct.prix_30ml" name="p30" placeholder="Prix" [required]="newProduct.dispo_30ml"> DT
        </div>

        <div class="price-group">
          <input type="checkbox" [(ngModel)]="newProduct.dispo_70ml" name="d70" id="d70">
          <label for="d70">70 ML</label>
          <input type="number" [(ngModel)]="newProduct.prix_70ml" name="p70" placeholder="Prix" [required]="newProduct.dispo_70ml"> DT
        </div>
      </div>

      <button type="submit" class="btn-submit" [disabled]="productForm.invalid">
        Enregistrer le Produit
      </button>

    </form>
  </div>

  <div class="card">
    <h2>ðŸ“¦ Stock Actuel</h2>
    
    <div class="table-responsive">
      <table class="stock-table">
        <thead>
          <tr>
            <th>Image</th> <th>Code</th>
            <th>Nom</th>
            <th>CatÃ©gorie</th>
            <th>15ml</th>
            <th>30ml</th>
            <th>70ml</th> <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of products">
            <td>
              <img [src]="p.image_url" alt="Parfum" class="product-thumb" *ngIf="p.image_url">
              <span *ngIf="!p.image_url">ðŸ“·</span>
            </td>
            
            <td><strong>{{ p.code_parfum }}</strong></td>
            <td>{{ p.nom_parfum }}</td>
            <td><span class="badge">{{ p.categorie }}</span></td>
            
            <td>
              <span *ngIf="p.dispo_15ml" class="price-tag">{{ p.prix_15ml }} DT</span>
              <span *ngIf="!p.dispo_15ml" class="unavailable">-</span>
            </td>

            <td>
              <span *ngIf="p.dispo_30ml" class="price-tag">{{ p.prix_30ml }} DT</span>
              <span *ngIf="!p.dispo_30ml" class="unavailable">-</span>
            </td>

            <td>
              <span *ngIf="p.dispo_70ml" class="price-tag">{{ p.prix_70ml }} DT</span>
              <span *ngIf="!p.dispo_70ml" class="unavailable">-</span>
            </td>

            <td>
              <button (click)="deleteProduct(p.code_parfum)" class="btn-delete">
                Supprimer
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>